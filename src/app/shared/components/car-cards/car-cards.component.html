<span
  #trigger
  class="car-cards-trigger"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
  (focus)="onMouseEnter()"
  (blur)="onMouseLeave()"
  tabindex="0"
>
  <ng-content />
</span>

<div
  class="tooltip"
  [class.tooltip-visible]="visible()"
  [class.tooltip-align-left]="alignLeft()"
  [class.tooltip-align-right]="alignRight()"
  [class.tooltip-expanding]="expanding()"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
  role="menu"
  [attr.aria-hidden]="!visible()"
>
  @for (carCard of carCards(); track carCard.title; let i = $index) {
    <div
      class="tooltip-item"
      [class.tooltip-item-selected]="expandingIndex() === i"
      [class.tooltip-item-sibling]="expandingIndex() !== null && expandingIndex() !== i"
      [class.tooltip-item-expanding]="expanding()"
      [style.--expand-transform]="expandingIndex() === i ? expandTransform() : 'scale(1)'"
      (click)="onCardClick(i, $event)"
      role="menuitem"
      tabindex="0"
    >
      <div
        class="tooltip-image"
        role="img"
        [attr.aria-label]="carCard.title"
        [style.background-image]="'url(' + carCard.image + ')'"
      ></div>
      <div class="tooltip-content">
        <span class="tooltip-title heading-sm">{{ carCard.title }}</span>
        <p class="tooltip-description body-sm">{{ carCard.description }}</p>
      </div>
    </div>
  }
</div>